{# for this service we extend the HMPO form template nunjucks file #}
{% extends "form-template.njk" %}

{% from "govuk/components/button/macro.njk"                 import govukButton %}
{% from "govuk/components/phase-banner/macro.njk"           import govukPhaseBanner %}
{% from "govuk/components/warning-text/macro.njk"           import govukWarningText %}
{% from "govuk/components/details/macro.njk"                import govukDetails %}

{% set hmpoPageTitle = hmpoPageKey+".title" %}
{% set hmpoPageTitleServiceNameRequired = hmpoPageKey+".serviceNameRequired" %}

{% block pageTitle %}
    {% if translate(hmpoPageKey+".serviceNameRequired") == 'true' %}
        {{ translate(hmpoPageTitle) }} – Prove your identity – GOV.UK
    {% else %}
        {{ translate(hmpoPageTitle) }} – GOV.UK
    {% endif %}
{% endblock %}

{% block head %}
{# super copies over the code for this block from HMPO template #}
{{ super() }}
<script>
    dataLayer = [{
        'gtm.allowlist': ['google'],
        'gtm.blocklist': ['adm', 'awct', 'sp', 'gclidw', 'gcs', 'opt' ]
    }];
</script>
<!-- Google Tag Manager -->
<script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TK92W68');
</script>

<!-- End Google Tag Manager -->
{% endblock %}

{% block bodyStart %}
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TK92W68"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
{% endblock %}


{# remove the cookie banner imported by the HMPO template #}
{% block cookieBanner %}
<!-- cookie banner code removed -->
{% endblock %}

{# the BETA banner is added to all pages using this template by default #}
{% block beforeContent %}
    {{ govukPhaseBanner({
    tag: { text: "beta" },
    html: 'This is a new service – your <a class="govuk-link" href="https://signin.account.gov.uk/contact-us">feedback</a> will help us to improve it.'
    }) }}
{% endblock %}


{# generate the specific footer items required for the PYI flows #}

{% set footerNavItems = translate("govuk.footerNavItems") %}
{% block footer %}
    {{ govukFooter( footerNavItems ) }}
{% endblock %}
